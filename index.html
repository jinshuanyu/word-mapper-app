<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no"/>
  <title>è‹±æ–‡æ‹¼å­— Ã— è²éŸ³å°ç…§</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Noto+Sans:wght@400;700&family=Noto+Sans+TC:wght@400;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    :root{ --c-primary:#7c3aed; --c-secondary:#10b981; --c-text:#1f2937; --c-bg:#f8fafc; --c-border:#e2e8f0; }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;overflow-x:hidden}
    body{font-family:"Inter","Noto Sans TC",sans-serif;background:var(--c-bg);color:var(--c-text);padding:1rem 0;line-height:1.6;font-size:18px}
    .container{max-width:1200px;margin:0 auto;padding:1.5rem 1rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.05);min-height:90vh}
    h1{font-family:'Noto Sans TC',sans-serif;font-size:2rem;font-weight:800;color:#0f172a;text-align:center;margin-bottom:2rem}

    /* ä¸‹æ‹‰é¸å–®æ¨£å¼ */
    .dropdown-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: .9rem;
      margin-bottom: 2.5rem;
      font-size: 1.15rem;
    }
    .dropdown-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: .9rem;
    }
    .dropdown-select {
      min-width: 230px;
      padding: .7rem 1rem;
      border: 2px solid #cbd5e1;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      background: #f8fafc;
      transition: all .2s;
    }
    .dropdown-select:focus {
      outline: none;
      border-color: var(--c-primary);
      box-shadow: 0 0 0 3px rgba(124,58,237,0.15);
    }
    .dropdown-btn {
      background: var(--c-primary);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: .7rem 1.4rem;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: background .2s, transform .1s;
    }
    .dropdown-btn:hover {
      background: #6d28d9;
      transform: translateY(-2px);
    }
    .dropdown-btn:active {
      transform: translateY(0);
    }

    @media (max-width:600px){
      .dropdown-select{min-width:160px;font-size:1rem}
      .dropdown-btn{font-size:1rem}
    }

    .topic-list{list-style:none;padding:0;margin-top:1rem}
    .page-section{display:none;min-height:50vh}
    .page-section.active{display:block}
    .back-button{background:#eef2ff;color:#4f46e5;border:none;border-radius:12px;padding:10px 18px;font-weight:700;cursor:pointer;font-size:1rem;margin-bottom:1.2rem;transition:.2s;display:flex;align-items:center;gap:8px}
    .back-button:hover{background:#e0e7ff}

    .credits{margin-top:3rem;padding-top:1.2rem;border-top:2px solid var(--c-border);text-align:center;font-size:.875rem;color:#475569;line-height:1.6}
    .credits a{color:#64748b;margin:0 .5rem;transition:color .2s;text-decoration:none}
    .credits a:hover{color:#3b82f6}
  </style>
</head>

<body>
  <div class="container">
    <main>
      <div class="searchbar" role="search">
        <input id="globalSearchInput" type="text" placeholder="è¼¸å…¥å–®å­—ï¼ˆä¾‹å¦‚ï¼šoneï¼‰" aria-label="æœå°‹å–®å­—" style="padding:10px 12px;border:2px solid var(--c-border);border-radius:10px;font-size:1rem;width:60%">
        <button id="globalSearchBtn" style="background:#111827;color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer">ğŸ” æœå°‹</button>
      </div>
      <p id="searchMsg" class="search-msg" style="text-align:center;color:#64748b;font-size:.9rem;margin:1rem 0;"></p>

      <section id="homePage" class="page-section active">
        <h1>è‹±æ–‡æ‹¼å­— Ã— è²éŸ³å°ç…§</h1>
        <ul id="topicList" class="topic-list"></ul>
      </section>
      <!-- å„ topic section æœƒå‹•æ…‹æ’å…¥ -->
    </main>

    <footer class="credits">
      Â© 2025 Christina Yu. All rights reserved.<br /><br />
      <a href="mailto:mamahowma@gmail.com"><i class="fa-solid fa-envelope fa-xl fa-fw"></i></a>&emsp;
      <a href="https://www.facebook.com/mamahowma" target="_blank"><i class="fa-brands fa-facebook fa-xl fa-fw"></i></a>&emsp;
      <a href="https://portaly.cc/mamahowma/support" target="_blank"><i class="fa-solid fa-mug-hot fa-xl fa-fw"></i></a>
    </footer>
  </div>

  <script>
    const TOPICS_URL='topics.json';
    const CACHE={topics:null,data:{}};

    function escapeHtml(t){const d=document.createElement('div');d.textContent=t==null?'':String(t);return d.innerHTML;}

    // â€”â€”â€” ä¸»è¦ï¼šå…©å±¤ä¸‹æ‹‰é¸å–® â€”â€”â€”
    function buildHomeAndSections(){
      const list=document.getElementById('topicList');
      const main=document.querySelector('main');

      list.innerHTML=`
        <div class="dropdown-container">
          <div class="dropdown-row">
            <label for="topicSelect">ä¸»é¡Œï¼š</label>
            <select id="topicSelect" class="dropdown-select">
              <option value="">è«‹é¸æ“‡ä¸»é¡Œ</option>
            </select>
          </div>
          <div class="dropdown-row">
            <label for="levelSelect">ç´šåˆ¥ï¼š</label>
            <select id="levelSelect" class="dropdown-select" disabled>
              <option value="">è«‹å…ˆé¸ä¸»é¡Œ</option>
            </select>
            <button id="enterBtn" class="dropdown-btn">é€²å…¥</button>
          </div>
        </div>
      `;

      const topicSelect=document.getElementById('topicSelect');
      const levelSelect=document.getElementById('levelSelect');
      const enterBtn=document.getElementById('enterBtn');

      (CACHE.topics?.topics||[]).forEach(t=>{
        const opt=document.createElement('option');
        opt.value=t.slug;
        opt.textContent=t.title;
        topicSelect.appendChild(opt);

        t.levels.forEach((lv,idx)=>{
          const label=lv.label||`-${idx+1}`;
          main.insertAdjacentHTML('beforeend',`
            <section id="${t.slug}_${idx+1}_Page" class="page-section">
              <button class="back-button" data-page-target="homePage"><i class="fa-solid fa-arrow-left"></i>è¿”å›ç›®éŒ„</button>
              <h1>${escapeHtml(t.title)}ï¼ˆ${escapeHtml(label)}ï¼‰</h1>
              <div id="${t.slug}_${idx+1}_Content"></div>
            </section>
          `);
        });
      });

      topicSelect.addEventListener('change',()=>{
        const slug=topicSelect.value;
        levelSelect.innerHTML='';
        if(!slug){
          levelSelect.disabled=true;
          levelSelect.innerHTML='<option value="">è«‹å…ˆé¸ä¸»é¡Œ</option>';
          return;
        }
        const topic=(CACHE.topics?.topics||[]).find(t=>t.slug===slug);
        if(!topic)return;
        topic.levels.forEach((lv,idx)=>{
          const opt=document.createElement('option');
          opt.value=`${slug}_${idx+1}_Page`;
          opt.textContent=lv.label||`Level ${idx+1}`;
          levelSelect.appendChild(opt);
        });
        levelSelect.disabled=false;
      });

      enterBtn.addEventListener('click',()=>{
        const val=levelSelect.value;
        if(!val){alert('è«‹é¸æ“‡ç´šåˆ¥');return;}
        showPage(val);
      });
    }

    function showPage(id){
      document.querySelectorAll('.page-section').forEach(p=>p.classList.remove('active'));
      const act=document.getElementById(id);
      if(act){act.classList.add('active');window.scrollTo({top:0,behavior:'smooth'});}
    }

    // æ¨¡æ“¬åˆå§‹åŒ–æµç¨‹
    document.addEventListener('DOMContentLoaded',async()=>{
      try{
        const r=await fetch(TOPICS_URL);
        if(!r.ok)throw new Error('è®€å–å¤±æ•—');
        CACHE.topics=await r.json();
      }catch(e){
        document.getElementById('topicList').innerHTML=`<p style="color:#b91c1c;text-align:center">è®€å– topics.json å¤±æ•—</p>`;
        return;
      }
      buildHomeAndSections();
    });
  </script>
</body>
</html>
